<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Fastcube TIBCO Factory">
    <meta name="author" content="Radwane Mabchour">
    <title>Packaging | bwMaven plugin</title>

    <!-- Bootstrap core CSS -->
    <link href="../../assets/dist/css/bootstrap.css" rel="stylesheet">
    <!-- Fontawesome core CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

    <style>
      
    </style>
    <!-- Custom styles for this template -->
    <link href="../../assets/dist/css/styles.css" rel="stylesheet">
    <link href="../../assets/theme/css/prism.css" rel="stylesheet" />
  </head>
  <body class="d-flex flex-column h-100">
    <header id="header">
      <!-- Fixed navbar -->
      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container">
          <a class="navbar-brand" href="../../index.html">FC TIBCO Factory</a>
          <a class="navbar-brand" href="#">/</a>
          <a class="navbar-brand" href="../index.html"><span class="text-info">bwMaven</span> plugin</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Overview <span class="sr-only">(current)</span></a>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a class="dropdown-item" href="../index.html">Introducation</a></li>
                  <li><a class="dropdown-item" href="../plugin-info.html">Goals</a></li>
                  <li><a class="dropdown-item" href="../plugin-usage.html">Usage</a></li>
                  <li class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="../plugin-lifecycles.html">Lifecycles</a></li>
                  <li><a class="dropdown-item" href="../mavenization.html">Mavenization</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown"  href="#">Lifecycle phases</a>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a class="dropdown-item" href="development.html">Development</a></li>
                  <li><a class="dropdown-item active" href="#">Packaging</a></li>
                  <li><a class="dropdown-item" href="deployment.html">Deployment</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Reports</a>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li class="dropdown-submenu">
                    <a class="dropdown-item dropdown-toggle" href="../reports/project-info/project-info.html">Project Informations</a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="../reports/project-info/continuous-integration.html">Continuous Integration</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/dependencies.html">Dependencies</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/dependency-info.html">Dependency Information</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/distribution-management.html">Distribution Management</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/issue-tracking.html">Issue Tracking</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/project-licence.html">Project Licence</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/plugin-management.html">Plugin Management</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/project-team.html">Project Team</a></li>
                      <li><a class="dropdown-item" href="../reports/project-info/source-repository.html">Source Repository</a></li>
                    </ul>
                  </li>
                  <li class="dropdown-submenu">
                    <a class="dropdown-item dropdown-toggle" href="../reports/project-reports/project-reports.html">Project Reports</a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">Plugin Documentation</a></li>
                      <li><a class="dropdown-item" href="../apidocs/index.html">JavaDocs</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Main jumbotron for a primary marketing message or call to action -->
  <div class="jumbotron">
    <div class="container">
      <h1 class="display-4 font-weight-bold">Maven plugin for <span class="text-info">TIBCO BusinessWorks</span></h1>
      <h5>Enable Java-like lifecycle management in TIBCO BusinessWorks</h5>
    </div>
  </div>

  <div class="container">
    <div class="row" id="packaging">
      <div class="col-md-12">
        <h1>Packaging</h1>
        <hr><br>
        <p>For a <a href="../plugin-lifecycles.html#ear">TIBCO BusinessWorks project</a>, the packaging is the step that comes right after compilation of the EAR and unit tests.</p>
        <p>In fact, deploying a TIBCO BusinessWorks EAR implies to <a href="../doc-mojo/extract-xml-from-ear-mojo.html">create a Deployment Descriptor XML file</a>.</p>
        <p>Moreover, the packaging step will provide an exclusive syntax to simplify the configuration of TIBCO BusinessWorks applications. To achieve this, the previous XML file will be <a href="../doc-mojo/generate-properties-from-xml-mojo.html">converted to properties files</a> that will be easier to edit.</p>
        <p>The scope of this page is to describe the <b>files generated by the packaging phase for one TIBCO BusinessWorks project</b> and explain their use in the next phase: deployment.</p>
        <p>The generation of a full compressed package with the maven-assembly-plugin is out of the scope.</p>  
        <div class="row">
          <div class="col-md-6" id="xmlBasedConfiguration">
            <h2>XML-based configuration</h2>
            <p>The Deployment Descriptor in TIBCO (not necessarly BusinessWorks) is an XML file with a root element called <i>&lt;application&gt;</i> based on a schema with <a href="http://www.tibco.com/xmlns/ApplicationManagement">http://www.tibco.com/xmlns/ApplicationManagement</a> namespace.</p>
            <pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;application xmlns=&quot;http://www.tibco.com/xmlns/ApplicationManagement&quot; name=&quot;MyBWProject&quot;&gt;
      ...
      &lt;NVPairs name=&quot;Global Variables&quot;&gt;
          &lt;NameValuePair&gt;
              &lt;name&gt;Connection/JMS/Port&lt;/name&gt;
              &lt;value&gt;7222&lt;/value&gt;
          &lt;/NameValuePair&gt;
      &lt;/NVPairs&gt;
      ...
      &lt;services&gt;
          &lt;bw name=&quot;MyBWProject.par&quot;&gt;
              &lt;enabled&gt;true&lt;/enabled&gt;
              &lt;bindings&gt;
                  &lt;binding name=&quot;MyBWProject-1&quot;&gt;
                      &lt;machine&gt;10.8.0.1&lt;/machine&gt;
                      ...
                  &lt;/binding&gt;
              &lt;/bindings&gt;
              &lt;NVPairs name=&quot;Runtime Variables&quot;&gt;
                  &lt;NameValuePair&gt;
                      &lt;name&gt;Connection/JMS/Port&lt;/name&gt;
                      &lt;value&gt;7223&lt;/value&gt;
                  &lt;/NameValuePair&gt;
              &lt;/NVPairs&gt;
              ...
              &lt;bwprocesses&gt;
                  &lt;bwprocess name=&quot;JMSInput.process&quot;&gt;
                      &lt;starter&gt;JMS Queue Receiver&lt;/starter&gt;
                      &lt;enabled&gt;true&lt;/enabled&gt;
                      &lt;maxJob&gt;0&lt;/maxJob&gt;
                      &lt;activation&gt;true&lt;/activation&gt;
                      &lt;flowLimit&gt;0&lt;/flowLimit&gt;
                  &lt;/bwprocess&gt;
                  ...
              &lt;/bwprocesses&gt;
              &lt;isFt&gt;false&lt;/isFt&gt;
          &lt;/bw&gt;
      &lt;/services&gt;
  &lt;/application&gt;</code></pre>
          </div>
          <div class="col-md-6" id="propertiesBasedConfiguration">
            <h2>Properties-based configuration</h2>
            <p>In the world of exploitation teams, the standard mechanism to configure a system is to edit (most likely in vi editor) plain text files with <mark>key=value</mark> properties. These files are called properties-based configuration files.</p>
            <p>However the TIBCO Deployment Descriptor is XML-based. That’s why this plugin will <a href="../doc-mojo/generate-properties-from-xml-mojo.html">convert</a> the <a href="#xmlBasedConfiguration">XML Deployment Descriptor file</a> <a href="../doc-mojo/extract-xml-from-ear-mojo.html">extracted from the TIBCO BusinessWorks EAR</a> file to properties-based files:</p>
            <ul> 
            <li><b>&lt;application&gt;.gv.properties</b>: to modify the Global Variables</li> 
            </ul>
            <p>Each <mark>key=value</mark> line of a <i>“.gv.properties”</i> file is the representation of a <b>&lt;NameValuePair&gt;</b> element with a subelement <b>&lt;name&gt;</b> corresponding to the <mark>key</mark> and a subelement <b>&lt;value&gt;</b> corresponding to the <mark>value</mark>. For instance:</p>
            <pre><code class="language-xml">Connection/JMS/Port=7222</code></pre>
            <ul> 
              <li><b>&lt;application&gt;.services.properties</b>: to create the service-level configuration such as <mark>bindings</mark>, <mark>processes</mark>…</li> 
            </ul>
            <p>Each line of a <i>“.services.properties”</i> file is composed of a <mark>key</mark> which has a XPath-like syntax to define element in the TIBCO Deployment Descriptor, relatively to te <i>&lt;services&gt;</i> element.</p>
            <p>This syntax will basically be:</p>
            <pre><code class="language-xml">&lt;element-name&gt;[@name]/&lt;sub-element-name&gt;/&lt;sub-sub-element-name&gt;=&lt;value&gt;</code></pre>
            <p>For instance:</p>
            <pre><code class="language-xml">bw[MyBWProject.par]/bindings/binding[MyBWProject-1]/machine=10.8.0.1

bw[MyBWProject.par]/bindings/variables/variable[Connection/JMS/Port]=7223

bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/starter=JMS Queue Receiver
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/enabled=true
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/maxJob=0
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/activation=true
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/flowLimit=0</code></pre>
            <p>If an element with the name between bracket doesn’t exist, it will be created on-the-fly. Thus, it is possible to create new bindings dynamically in the properties-based files. This custom configuration will be <a href="../doc-mojo/generate-xml-from-properties-mojo.html">put back into the TIBCO Deployment Descriptor</a>.</p>
          </div>
        </div>
        <div class="row" id="cofigurationManagementCycle">
          <div class="col-md-12">
            <h2>Configuration management lifecycle</h2>
            <p>Now that we have described all the files generated during the packaging phase for one TIBCO BusinessWorks application, we will see how these files interact before the package is ready to be deployed.</p>
            <br />
            <div class="row">
              <div class="col-md-6" id="package">
                <h3>Package</h3>
                <p>The configuration management lifecycle has to address a main issue: synchronize actions of development team and operations team (see <a href="http://en.wikipedia.org/wiki/DevOps">DevOps wikipedia article</a> for details).</p>
                <p>This plugin defines a comprehensive strategy aimed at clearly separating concerns between build time and deployment time:</p>
                <ul> 
                  <li><b>packaging</b> phase for development team</li> 
                  <li><b>deployment</b> phase for operations team</li> 
                 </ul>
              </div>
              <div class="col-md-6" id="deployment">
                <h3>Deployment</h3>
                <p>Once the packaging step we have three files that will be used by deployment step :</p>
                <ul> 
                <li><b>&lt;aplication&gt;.ear</b>: the EAR</li> 
                <li><b>&lt;aplication&gt;-final.xml</b>: the XML Deployment Descriptor with additional configuration set during <b>packaging</b> phase</li> 
                <li><b>pom.xml</b>: a special Maven POM file dedicated to the deployment on a TIBCO domain (with <a href="../plugin-lifecycles.html#deployment">‘bw-ear-deploy’ packaging</a>)</li> 
                </ul>
                <p>There are also three more files for reference purpose only:</p>
                <ul> 
                <li><b>&lt;aplication&gt;.xml</b>: the XML Deployment Descriptor extracted from the EAR</li> 
                <li><b>&lt;aplication&gt;.gv.properties</b>: the properties files for Global Variables</li> 
                <li><b>&lt;aplication&gt;.services.properties</b>: the properties files for services</li> 
                </ul>
              </div>
            </div>
            <div class="row" id="lifecyle">
              <div class="col-md-6">
                <p>
                  <img src="../../assets/img/configuration-lifecycle-packaging.png" alt="configuration lifecycle packaging">
                </p>
              </div>
              <div class="col-md-6">
                <p>
                  <img src="../../assets/img/configuration-lifecycle-deployment.png" alt="configuration lifecycle deployment">
                </p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <ul> 
                  <li>At first, the EAR is generated by previous step “compile”. from this EAR a standard Deployment Descriptor XML file is extracted. This file is the one with default configuration set in TIBCO Designer by developers (see <a href="../doc-mojo/extract-xml-from-ear-mojo.html">extract-xml-from-ear</a> goal).</li> 
                  <li>Then, this XML file is converted to the properties-based syntax described <a href="#propertiesBasedConfiguration">above</a> (see <a href="../doc-mojo/generate-properties-from-xml-mojo.html">generate-properties-from-xml</a> goal).</li> 
                  <li>Optionally, these properties can be overridden by properties of the “reference” files. These files can be used by developers to put configuration that doesn’t depend on target environment (machines hostnames, DB credentials, JMS credentials…). Usually the “reference” files are stored with the sources on the SCM (see <a href="../doc-mojo/generate-properties-from-xml-mojo.html">generate-properties-from-xml</a> goal).</li> 
                  <li>The last step is to convert properties-based files back to the XML Deployment Descriptor (see <a href="../doc-mojo/generate-xml-from-properties-mojo.html">generate-xml-from-properties</a> goal).</li> 
                 </ul>
              </div>
              <div class="col-md-6">
                <p>The important point to notice is that properties files can be edited before deploying the application. This last configuration edition will be included in the XML before deploying the EAR to TIBCO Domain.</p>
                <p>This will be further explained in the <a href="./deployment.html">Deployment phase</a>.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br /><br />

  <footer class="jumbotron">
    <div class="container">
      <div class="row clearfix small">
        <div class="col-sm-3">
          <h6>OVERVIEW</h6>
          <div class="nav flex-column nav-pills">
            <a class="nav-link" href="../index.html">Introduction</a>
            <a class="nav-link" href="../plugin-info.html">Goals</a>
            <a class="nav-link" href="../plugin-usage.html">Usage</a><br />
            <a class="nav-link" href="../plugin-lifecycles.html">Lifecycles</a>
            <a class="nav-link" href="../mavenization.html">Mavenization</a>
          </div>
        </div>
        <div class="col-sm-3">
          <h6>LIFECYCLE PHASES</h6>
          <div class="nav flex-column nav-pills">
            <a class="nav-link" href="development.html">Development</a>
            <a class="nav-link active" href="#">Packaging</a>
            <a class="nav-link" href="deployment.html">Deployment</a>
          </div>
        </div>
        <div class="col-sm-3">
          <h6>REPORTS</h6>
          <div class="nav flex-column nav-pills">
            <a class="nav-link" href="../reports/project-info/project-info.html">Project Informations <i class="fas fa-caret-right"></i></a>
            <a class="nav-link" href="../reports/project-reports/project-reports.html">Project Reports <i class="fas fa-caret-right"></i></a>
          </div>
        </div>
        <div class="col-sm-3">
          <blockquote class="custom-blockquote">
            <p><i>bwMaven</i> (part of the <i>FC TIBCO Factory</i>) is a lifecycle management tool for TIBCO BusinessWorks based on <a href="http://maven.apache.org/">Maven</a></p>
          </blockquote>
        </div>
      </div>
    </div>
  </footer>

  <footer class="footer mt-auto py-3">
    <div class="container">
      <span class="text-muted">Copyright &copy; 2020 Fastcube. All Rights Reserved.</span>
      <div class="float-right">
        <a href="#header">back to top</a>
      </div>
    </div>
  </footer>

  <script src="../../assets/theme/js/prism.js"></script>

  <script src="../../assets/dist/js/jquery-3.5.1.min.js"></script>
  <!-- <script src="assets/dist/js/popper.min.js"></script> -->
  <script src="../../assets/dist/js/bootstrap.bundle.js"></script>
</html>
